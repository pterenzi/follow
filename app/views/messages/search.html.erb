<%= render :partial=>"layouts/moldura" %>
<% content_for :main do %>
<h2>Searching messages</h2><br/>
<% form_tag search_messages_path() do  %>
<table>
  <tr><td align="right"><%= t(:content) %> :</td>
  <td><%= text_field_tag :content, params[:content] %></td>
  </tr>
  <tr>
	<td align="right"><%= t(:users) %> :</td>
	<td><%= select "user", "id", @users, :include_blank=>true %></td>
  </tr>
  <tr>
	<td align="right"><%= t(:the_date) %> :</td>
	<td> <%= select_month @date , :include_blank=>true %>
		 <%= select_year @date , :date=>params[:date],:include_blank=>true %></td>
  </tr>
  <tr>
  	<td>&nbsp;</td>
    <td><%= submit_tag t(:search), :name=>nil %></td>
  </tr>
</table>
<% end %>
<p>
<table>
	<tr>
		<th><%=t(:message)%></th>
		<th><%= t(:sent_by)%></th>
		<th><%= t(:at)%></th>
		<th><%= t(:readed)%></th>
	</tr>
<% for message in @messages%>
  <tr>
  	<td width="220px"><%= message.content %></td>
    <td width="130px"><%= message.written_by.name %></td>
    <td width="100px"><%= message.created_at.strftime("%d/%m  %H:%M") %></td>
    <td width="100px"><%= message.readed.strftime("%d/%m  %H:%M") unless message.readed.nil? %></td>
  </tr>
<% end %>
</table>
</p>
<% end %>